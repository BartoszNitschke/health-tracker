<!-- Popup backdrop -->
<div
  *ngIf="isOpen"
  class="popup-backdrop fixed inset-0 z-50 flex items-center justify-center"
  style="backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(12px); cursor: default"
  (click)="onBackdropClick($event)"
  (keydown)="onKeyDown($event)"
  tabindex="0"
  [@fadeIn]
>
  <!-- Popup content -->
  <div
    [class]="popupService.currentPopup()?.type === 'customize-targets' 
      ? 'popup-content relative bg-white rounded-3xl shadow-2xl max-w-6xl w-full mx-4 transform'
      : 'popup-content relative bg-white rounded-3xl shadow-2xl max-w-md w-full mx-4 transform'"
    (click)="$event.stopPropagation()"
    [@slideIn]
  >
    <!-- Header -->
    <div
      class="flex items-center justify-between p-6 border-b border-gray-100"
      *ngIf="title || showCloseButton"
    >
      <h2 class="font-poppins text-2xl text-night font-semibold" *ngIf="title">{{ title }}</h2>
      <button
        *ngIf="showCloseButton"
        (click)="onCloseClick()"
        class="w-8 h-8 flex items-center justify-center rounded-full cursor-pointer hover-red-dark transition-colors duration-200"
        aria-label="Zamknij"
      >
        <mat-icon style="color: #6b7280; font-size: 20px">close</mat-icon>
      </button>
    </div>

    <!-- Content slot -->
    <div class="p-6">
      <ng-content></ng-content>
    </div>
  </div>
</div>
